#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>

////////////////////////////////////////////////////////////////////////////////
// Struct DisjointSet
////////////////////////////////////////////////////////////////////////////////

typedef struct
{
    size_t *__data;
} DisjointSet;


////////////////////////////////////////////////////////////////////////////////
// DisjointSet Constructor
////////////////////////////////////////////////////////////////////////////////

void disjointSetConstructor(DisjointSet *this, size_t size)
{
    this->__data = (size_t *)malloc(sizeof(size_t) * size);

    for (size_t idx = 0; idx < size; idx++)
    {
        this->__data[idx] = idx;
    }
}


////////////////////////////////////////////////////////////////////////////////
// DisjointSet Get
////////////////////////////////////////////////////////////////////////////////

size_t disjointSetGet(DisjointSet *this, size_t idx)
{
    return this->__data[idx] == idx ? idx :
        (this->__data[idx] = disjointSetGet(this, this->__data[idx]));
}


////////////////////////////////////////////////////////////////////////////////
// DisjointSet Set
////////////////////////////////////////////////////////////////////////////////

void disjointSetSet(DisjointSet *this, size_t idx, size_t owner)
{
    this->__data[idx] = owner;
}


////////////////////////////////////////////////////////////////////////////////
// DisjointSet Destructor
////////////////////////////////////////////////////////////////////////////////

void disjointSetDestructor(DisjointSet *this)
{
    free(this->__data);
}


////////////////////////////////////////////////////////////////////////////////
// Main
////////////////////////////////////////////////////////////////////////////////

int main()
{
    DisjointSet disjointSetObj;

    disjointSetConstructor(&disjointSetObj, 10);

    for (size_t idx = 0; idx < 9; idx++)
    {
        disjointSetSet(&disjointSetObj, idx, idx + 1);
    }

    for (size_t idx = 0; idx < 10; idx++)
    {
        disjointSetGet(&disjointSetObj, idx);
    }

    for (size_t idx = 0; idx < 10; idx++)
    {
        printf("%d", disjointSetObj.__data[idx]);
    }

    disjointSetDestructor(&disjointSetObj);
}
