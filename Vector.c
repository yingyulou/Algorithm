#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <string.h>

////////////////////////////////////////////////////////////////////////////////
// Struct Vector
////////////////////////////////////////////////////////////////////////////////

typedef struct
{
    size_t  __size;
    size_t  __cap;
    int    *__data;
} Vector;


////////////////////////////////////////////////////////////////////////////////
// Vector Constructor
////////////////////////////////////////////////////////////////////////////////

void vectorConstructor(Vector *this)
{
    this->__size = 0;
    this->__cap  = 0;
    this->__data = 0;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Size
////////////////////////////////////////////////////////////////////////////////

size_t vectorSize(Vector *this)
{
    return this->__size;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Get
////////////////////////////////////////////////////////////////////////////////

int vectorGet(Vector *this, size_t idx)
{
    return this->__data[idx];
}


////////////////////////////////////////////////////////////////////////////////
// Vector Set
////////////////////////////////////////////////////////////////////////////////

void vectorSet(Vector *this, size_t idx, int val)
{
    this->__data[idx] = val;
}


////////////////////////////////////////////////////////////////////////////////
// Realloc Vector
////////////////////////////////////////////////////////////////////////////////

void __tryReallocVector(Vector *this)
{
    if (this->__size == this->__cap)
    {
        this->__cap = (this->__cap + 1) * 2;
        this->__data = (int *)realloc(this->__data, this->__cap * sizeof(int));
    }
}


////////////////////////////////////////////////////////////////////////////////
// Vector Push
////////////////////////////////////////////////////////////////////////////////

void vectorPush(Vector *this, int val)
{
    __tryReallocVector(this);

    this->__data[this->__size++] = val;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Pop
////////////////////////////////////////////////////////////////////////////////

void vectorPop(Vector *this)
{
    this->__size--;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Insert
////////////////////////////////////////////////////////////////////////////////

void vectorInsert(Vector *this, size_t idx, int val)
{
    __tryReallocVector(this);

    memmove(this->__data + idx + 1, this->__data + idx,
        (this->__size - idx) * sizeof(int));

    this->__data[idx] = val;
    this->__size++;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Erase
////////////////////////////////////////////////////////////////////////////////

void vectorErase(Vector *this, size_t idx)
{
    memmove(this->__data + idx, this->__data + idx + 1,
        (this->__size - idx - 1) * sizeof(int));

    this->__size--;
}


////////////////////////////////////////////////////////////////////////////////
// Vector Destructor
////////////////////////////////////////////////////////////////////////////////

void vectorDestructor(Vector *this)
{
    free(this->__data);
}


////////////////////////////////////////////////////////////////////////////////
// Main
////////////////////////////////////////////////////////////////////////////////

int main()
{
    Vector vectorObj;

    vectorConstructor(&vectorObj);

    vectorPush(&vectorObj, 1);
    vectorPush(&vectorObj, 2);
    vectorPush(&vectorObj, 3);

    vectorPop(&vectorObj);

    vectorSet(&vectorObj, 0, 4);

    vectorInsert(&vectorObj, 1, 5);
    vectorInsert(&vectorObj, 1, 6);

    vectorErase(&vectorObj, 1);

    for (size_t idx = 0; idx < vectorSize(&vectorObj); idx++)
    {
        printf("%d\n", vectorGet(&vectorObj, idx));
    }

    vectorDestructor(&vectorObj);
}
